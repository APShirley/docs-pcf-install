#encoding: utf-8
---
title: Pivotal CF Troubleshooting Guide
---

### <a id='install'></a>Troubleshooting Pivotal CF Installations ###

If you encounter a problem during a Pivotal CF install, the following list of troubleshooting measures can help you diagnose and resolve issues. These measures are outlined in more detail below.

## <a id='contact_bosh'></a>Step 1: Contact BOSH ##

1. Either SSH to the Pivotal CF installation VM or access it using the vSphere console.

1. Log in using the profile you created when you imported the OVA.

1. Run `cd /home/tempest-web/tempest/web/`.

1. Run export BUNDLE_GEMFILE=/home/tempest-web/tempest/web/bosh.Gemfile, OR prepend `exec bosh *IP_OF_YOUR_DIRECTOR*
 **Note**: Refer to the **Status** tab of the **Operator** tile (where is this now??) to find the IP of your Director.

1. Run `bundle exec bosh login`.
Use the BOSH director credentials.

1. Run `bosh deployment /var/tempest/workspaces/default/deployments/cf-******.yml`.

## <a id='bosh_cli'></a>Step 2: Try relevant BOSH CLI commands ##

### <a id='bosh_cck'></a>bosh cck ###

`bosh cck` (`bosh cloudcheck`): This command attempts to first detect any differences between the world the Director expects for this deployment and the actual state of the world. For each difference it detects, `bosh cck` offers a potential resolution. The possible resolutions are listed below:

#### <a id='unresponsive_agent'></a>Unresponsive Agent ####

 Example`bosh cck` output:

<pre class="terminal"> 
$ bosh cck
ccdb/0 (vm-3e37133c-bc33-450e-98b1-f86d5b63502a) is not responding:

- Ignore problem
- Reboot VM
- Recreate VM using last known apply spec
- Delete VM reference (DANGEROUS!)
</pre>
 


- `Ignore problem`: Do nothing. You might want to ignore the problem in order to `bosh ssh` and do some troubleshooting on the machine. If performing other steps continually brings the machine to this state, you could have a configuration problem that will be hard to detect without looking at the agent logs (see below).
- `Reboot VM`: **In most cases, try this first**. The error could be transient.
- `Recreate VM using last known apply spec` - Destroy the server and have BOSH recreate it from the deployment manifest the installer provides. If the machine was somehow corrupted, this is the best option.
- `Delete VM reference` (DANGEROUS!) - Select this option only if you know that the BOSH database somehow has a stale reference that would lead it to believe that an agent should be running on this machine. Once you delete the reference, you can no longer control the machine via BOSH.

#### <a id='missing_vm'></a>Missing VM ####

Example `bosh cck` output:

<pre class-"terminal">
$ bosh cck
VM with cloud ID `vm-3e37133c-bc33-450e-98b1-f86d5b63502a' missing:

- Ignore problem
- Recreate VM using last known apply spec
- Delete VM reference (DANGEROUS!)
</pre>

- `Ignore problem`: Do nothing. You might want to ignore the problem in order to `bosh ssh` and do some troubleshooting on the machine. If performing other steps continually brings the machine to this state, you could have a configuration problem that will be hard to detect without looking at the agent logs (see below).
- `Recreate VM using last known apply spec` - Destroy the server and have BOSH recreate it from the deployment manifest the installer provides. If the machine was somehow corrupted, this is the best option.
- `Delete VM reference` (DANGEROUS!) - Select this option only if you know that the BOSH database somehow has a stale reference that would lead it to believe that an agent should be running on this machine. Once you delete the reference, you can no longer control the machine via BOSH.

#### <a id='unbound_instancevm'></a>Unbound Instance VM ####

Example `bosh cck` output:

<pre class="terminal">
	$bosh cck
	VM `vm-3e37133c-bc33-450e-98b1-f86d5b63502a' reports itself as `ccdb/0' but does not have a bound instance:
	
	- Ignore problem
	- Delete VM (unless it has persistent disk)
	- Reassociate VM with corresponding instance
	</pre>
	
- `Ignore problem`: Do nothing. You might want to ignore the problem in order to `bosh ssh` and do some troubleshooting on the machine. If performing other steps continually brings the machine to this state, you could have a configuration problem that will be hard to detect without looking at the agent logs (see below).
- `Delete VM (unless it has persistent disk)`: If you believe that the VM is associated with a job erroneously, this is a good option.
- `Reassociate VM with corresponding instance`: If you believe that the VM is correct in saying it should be associated with the job, and that the BOSH DB is in error, this is a good option.

#### <a id='out_of_sync'></a>Out of Sync VM ####


