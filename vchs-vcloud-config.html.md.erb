---
title: Configuring Ops Manager Director for vCloud Air and vCloud
owner: Ops Manager
---

<strong><%= modified_date %></strong>

This topic describes how to configure the Ops Manager Director for VMWare vCloud Air and vCloud.

Before you begin this procedure, ensure that you have successfully completed all steps in the [Installing Pivotal Cloud Foundry&reg; on vSphere and vCloud Air](vsphere.html) and [Deploying Operations Manager to vCloud Air and vCloud](pcf-vchs-vcloud.html) topics. After you complete this procedure, follow the instructions in the [Configuring Elastic Runtime for vSphere and vCloud](config-er-vmware.html) topic.

## <a id='vcloud-config'></a>Step 1: vCloud Config Page

1. Log in to Ops Manager and click the **Ops Manager Director** tile.

    <%= image_tag("vcair-tile.png") %>

1. Select **vCloud Config**.

    <%= image_tag("vcloud-configuration.png") %>

1. Enter the following information and click **Save**:
    * The **vCloud API URL** of the vCloud Director.
    * Your **Organization name**.
    <p class="note"><strong>Note</strong>: vCloud Air and vCloud Director use case-sensitive organization names. The name that you supply in the Ops Manager <strong>Organization name</strong> field must match the vCD organization name exactly.</p>
    * Your **Username** and **Password**. This user must have create and delete privileges for VMs and folders.
    * The **Virtual Datacenter name**. This must match the name of the virtual datacenter as it appears
    in vCloud Director. The name is an alphanumeric string with a `VDC` prefix. For example, `VDC-M903513742-9043`.
    * The **Storage Profile name**.

## <a id='dir-config'></a>Step 2: Director Config Page

1. Select **Director Config**.
<%= image_tag("vcloud-director-config.png") %>

1. Enter the following information and click **Save**:
    * **NTP Servers (comma delimited)**: Enter a comma-delimited list of NTP server addresses.
    * **Metrics IP Address**: If you have installed and configured the Ops Metrics product, enter the Metrics IP address.
    * **Enable VM Resurrector Plugin**: Select this checkbox to enable Resurrector functionality and increase Elastic Runtime availability. 
    * **Recreate all VMs**: Select this checkbox to force BOSH to recreate all VMs on the next deploy. Any persistent disk data will be preserved.
    * **HM Pager Duty Plugin**: Select this checkbox to enable Health Monitor integration with PagerDuty.
        * **Service Key**: Enter your API service key from PagerDuty.
        * **HTTP Proxy**: Enter an HTTP proxy for use with PagerDuty.
    * **HM Email Plugin**: Select this checkbox to enable Health Monitor integration with email.
        * **Host**: Enter your email hostname.
        * **Port**: Enter your email port number.
        * **Domain**: Enter your domain.
        * **From**: Enter the address that will appear as the sender.
        * **Recipients**: Enter comma separated addresses of intended recipients.
        * **Username**: Provide your username for your email server.
        * **Password**: Provide your password for the username above.
        * **Enable TLS**: Select this checkbox to enable Transport Layer Security.
    * **Blobstore Location**: Pivotal recommends that you select **Internal** for your **Blobstore Location**. However, if you choose **S3 Compatible Blobstore** for your blobstore location, complete the **S3 Endpoint**, **Bucket Name**, **Access Key**, **Secret Key**, **V2 Signature/V4 Signature**, and **Region** with information from your blobstore provider.
    1. **Database Location**: By default, Pivotal Cloud Foundry&reg; deploys and manages a database for you. If you choose to use an **External MySQL Database**, complete the associated fields with information obtained from your external MySQL Database provider: **Host**, **Port**, **Username**, **Password**, and **Database**.
    1. **Max Threads**: This sets the maximum number of threads that the Ops Manager Director can run simultaneously. For vCloud, the default value is 4. Leave the field blank to use this default value. Pivotal recommends that you use the default value unless it results in rate limiting or errors on your IaaS.

<p class="note"><strong>Note</strong>: After your initial deployment, you will not be able to edit the Blobstore and Database locations.</p>

## <a id='create-networks'></a>Step 3: Create Networks Page

1. Select **Create Networks**.
    <%= image_tag("vcloud-create-networks.png") %>
1. Select **Enable ICMP checks** to enable ICMP on your networks.
1. Use the following steps to create one or more Ops Manager networks:
    * Click **Add Network**.
    * Enter a unique **Name** for the network.
    * Click **Add Subnet** to create one or more subnets for the network.
    * Enter the **vCloud Network Name** as it appears in vCloud Director.
    * For **CIDR**, enter a valid CIDR block in which to deploy VMs. For example, enter `10.9.9.0/24`.
    * For **Reserved IP Ranges**, enter any IP addresses from the **CIDR** that you want to blacklist from the installation. Ops Manager will not deploy VMs to any IP in this range.
    * Enter **DNS** and **Gateway** IP addresses.
    * Click **Save**.

## <a id='assign-networks'></a>Step 4: Assign Networks Page

1. Select **Assign Networks**.
<%= image_tag("vcloud-assign-networks.png") %>
1. Use the drop-down menu to select the network that acts as the infrastructure and deployment network for Ops Manager. You can configure the Ops Manager Director to have an IP address on one network.
    
## <a id='security-config'></a>Step 5: Security Page

1. Select **Security**.
<%= image_tag("vcloud-security.png") %>
1. Choose **Generate passwords** or **Use default BOSH password**. Pivotal recommends that you use the **Generate passwords** option for greater security.
1. Click **Save**. To view your saved Director password, click the **Credentials** tab.

## <a id='resource-config'></a>Step 6: Resource Config Page

1. Select **Resource Config**.
<%= image_tag("vcloud-resources.png") %>
1. Adjust any values as necessary for your deployment, such as increasing the persistent disk size. Select **Automatic** from the drop-down menu to provision the amount of persistent disk predefined by the job. If the persistent disk field reads **None**, the job does not require persistent disk space.
    <p class="note"><strong>Note</strong>: If you set a field to <strong>Automatic</strong> and the recommended resource allocation changes in a future version, Ops Manager automatically uses the new recommended allocation.</p> 
1. Click **Save**.

## <a id='exper-features'></a>Step 7: (Optional) Experimental Features Page

Pivotal recommends caution with these features if you have other Pivotal Cloud Foundry service tiles installed in your PCF deployment. Not all of the services are guaranteed to work as expected with these features enabled.

1. Select **Experimental Features**.
<%= image_tag("vcloud-experimental.png") %>
1. Enter a trusted certificate and click **Save**.

These certificates enable BOSH-deployed VMs to trust a custom root certificate. However, adding a custom root certificate does not insert it into application containers or into your UAA truststore.

## <a id='complete-installation'></a>Step 8: Complete the Ops Manager Director Installation

1. Click the **Installation Dashboard** link to return to the Installation Dashboard. 
1. Click **Apply Changes**.
1. Follow the next steps in [Configuring Elastic Runtime for vSphere and vCloud] (config-er-vmware.html).
