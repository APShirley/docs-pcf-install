---
title: Creating UAA Clients for Running Bash Scripts
---

<strong><%= modified_date %></strong>

This topic describes how to create a UAA (User Account and Authentication) client on the BOSH Director, in order to run Bash scripts against BOSH. 

If you chose to use Internal Authentication when configuring Ops Manager, you do not need to perform these steps, because your scripts can obtain a one-time authorization code from the BOSH Director UAA. If you chose to use an external Identity Provider, however, you need to create a client on the BOSH Director UAA to give your script the proper access permissions.

1. Obtain your Ops Manager Director IP address by logging into the Ops Manager web interface, clicking the **Ops Manager Director** tile, and selecting the **Status** tab. Review the [Advanced Troubleshooting with the BOSH CLI](trouble-advanced.html#gather) topic for more information.
1. SSH into your Ops Manager, using your private key `.pem` file to authenticate. Consult the [Advanced Troubleshooting with the BOSH CLI](trouble-advanced.html#ssh) topic for infrastructure-specific instructions. The following example assumes an Amazon Web Services deployment.
<pre class="terminal">$ ssh -i ops_mgr.pem ubuntu@OPS-MANAGER-IP</pre>
1. On the Ops Manager VM, change into the `/debug/files` directory and obtain the BOSH director IP.
<pre class="terminal">$ cd /debug/files</pre>
1. From your machine, target the BOSH Director's UAA.
<pre class="terminal">$ uaac target http://BOSH-DIRECTOR-IP:8080</pre>
1. Obtain the credentials for the UAA login client and admin user by using `curl` to make two calls to the Ops Manager API.
<pre class="terminal">$ curl https://YOUR-OPSMAN-URL/api/v0/deployed/director/credentials/uaa\_login\_client\_credentials
$ curl https://YOUR-OPSMAN-URL/api/v0/deployed/director/credentials/uaa\_admin\_user\_credentials
</pre>
1. Get a token using the UAA Command Line Client. If you do not already have UAAC installed, run `gem install cf-uaac` from a terminal window.
<pre class="terminal">$ uaac token -t owner get login admin
Client Secret: {uaa\_login\_client\_credentials password}
Client Password: {uaa\_admin\_user\_credentials}</pre>
1. Add a client.
<pre class="terminal">$ uaac client add foo --authorized\_grant\_types client\_credentials
New client secret:  ***
Verify new client secret:  ***
  scope: uaa.none
  client\_id: foo
  resource\_ids: none
  authorized\_grant\_types: client\_credentials
  autoapprove:
  action: none
  authorities: uaa.none
  name: foo
  lastmodified: 1457725831413
  id: foo
</pre>

**Questions for Matt**:

1. How do you obtain your BOSH Director IP from the `/debug/files` directory of your Ops Manager Director VM?
1. How does your Bash script ultimately use this newly created UAA client to authenticate itself against BOSH?